{% extends "layout.html" %}

{% block content %}

<script src='static/Chart.js'></script>
<h2>{{ title }}.</h2>
<h3>{{ message }}</h3>

<div id="main" style="width:50%;float:left;height:{{25*(names|length)+5}}px">
{% set all=[] %}
{% for one in names %}
    {% if all.append(people[one].cnum) %}{% endif %}
{% endfor %}
{% set all=all|sum %}
<table style="float:left;margin-right:45px">
    <tr>
        <th>순위  </th>
        <th>이름  </th>
        <th>대화점유율  </th>
        <th>대화수  </th>
    </tr>
    {% set cnt=[] %}
    {% for name in names %}
    
    <tr>
        <th>{{cnt|length + 1}}</th>
        <th>{{name}}</th>
        <th>{{'{:.2f}%'.format(people[name].cnum / all * 100|float)}}</th>
        <th>{{people[name].cnum}}</th>
    </tr>
    {% if cnt.append(0) %}{% endif %}
    {% endfor %}
</table>

<table style=flaot:right>
    <tr>
        <th>욕순위  </th>
        <th>이름  </th>
        <th>욕비율  </th>
        <th>욕횟수  </th>
	<th>대화수  </th>
    </tr>
    {% set cnt=[] %}
    {% for name in ynames %}
    
    <tr>
        <th>{{cnt|length + 1}}</th>
        <th>{{name}}</th>
        <th>{{'{:.2f}%'.format(people[name].ynum / people[name].cnum * 100|float)}}</th>
        <th>{{people[name].ynum}}</th>
        <th>{{people[name].cnum}}</th>
    </tr>
    {% if cnt.append(0) %}{% endif %}
    {% endfor %}
</table></div>
<div style="width:40%;float:right"><p><b>대화수<b></p>
<canvas id="chart" width="600" height="400" style=flaot:right></canvas><br><p>욕수</p>
<canvas id="chart2" width="600" height="400" style=flaot:right></canvas>
</div><div style="clear:both;"></div>


{% endblock %}

{% block scripts %}

<script>
   var pieData = [
            {% for item,label,colors in set %}
                {
                    value: {{item}},
                    label: "{{label}}",
                    color : "{{colors}}"
                },
                {% endfor %}
 
 
         ];
 
   var pieData2 = [
            {% for item,label,colors in set_y %}
                {
                    value: {{item}},
                    label: "{{label}}",
                    color : "{{colors}}"
                },
                {% endfor %}
 
 
         ];

   // get bar chart canvas
   var mychart = document.getElementById("chart").getContext("2d");
   var mychart2 = document.getElementById("chart").getContext("2d"); 
   steps = 10
   max = 10
   // draw pie chart
   new Chart(document.getElementById("chart").getContext("2d")).Pie(pieData);
   new Chart(document.getElementById("chart2").getContext("2d")).Pie(pieData2);

//document.getElementById("main").style.display = "none";

</script>


{% endblock %}
